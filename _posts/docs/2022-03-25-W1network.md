---
title: 'W1 네트워크 입문'
excerpt: 'W1 네트워크 입문의 발췌문.'
categories: 'Docs'
---

 W1 네트워크 입문

/

규모에 따라서 PAN(무선) LAN, MAN,  WAN

LAN 규모에서 사용하는 프로토콜이 : 이더넷 ethernet

케이블 연결, network adapter 장착, Address

Address (유일)

- Physical Address : network adapter 제조할 때 부여, MAC Address(이더넷) -스위칭목적
- Logical Address : IP Address(IP) , 인터넷목적

스위칭  switching

LAN

토큰링 : 한번에 한번씩 통신이 가능함. 나머지 대기.

이더넷 : 스위치 연결 시 사용X, 허브 장비를 연결할 때에 CSMA/CD 방식을 사용함.

이더넷 : CSMA/CD

FDDI : 링 구조, 광케이블로 이중화

WAN 사설망 : PPP, Frame-relay, ATM (우리나라에서는 사용하지 않음- 공인망에서 VPN)

케이블  :  TP (UTP, TCP ), 동축케이블, 광케이블

TP : Twisted pair  짝을 지어서 꼬여있는 케이블  - 구리선(data -> 전기적 신호 변환)

8가닥,  2가닥씩 짝을 지어서 꼬여있음.

UTP (unshielded) 쉴드가 없는 케이블

STP (shielded)  쉴드가 있는 케이블

UTP category 5   , 5e  100m 에서 많이 사용, 1G

UTP category 6  , 1G, 10G

UTP category 7 , 10G이상

Logical Address에 대한 Physical Address 알아오기 위해 사용하는 프로토콜 : ARP

(IPv4 주소)                           (mac 주소)

Physical Address에 대한 Logical Address 알아오기 위해 사용하는 프로토콜 Reverse ARP

MAC address

물리적 주소 . . . . . . . . : 98-83-89-9B-49-F9

한 글자가 4bit (이진수 4bit, 0000 ~ 1111 )

16진수로 표기  ( 98-83-89-9B-49-F9  ,  98:83:89:9B:49:F9 )

길이 : 6byte (48bit)

IPv6 주소의 일부분으로 사용하기도 함. (16진수 표기)

제조사 코드 24bit + 일련번호 24bit

98-83-89  -    9B-49-F9

OUI         제품일련번호

데이터를 전송하는 데 있어서, destination address 어떤 주소를 넣느냐에 따라서

- Unicast : (Uni 유일) 1:1제가 25명 교육생들에게 전달한다면…25명의 각각의 주소를 알아와서 같은 데이터를 25개 만들어서 각 주소를 넣어서 전송.
- Broadcast 방송용 1:all 장점 : 하나의 데이터에 dst주소=broadcast address 사용하여 전달, 네트워크 장비가 모두에게 전달해줌.단점 : 수신하기 싫어도 수신을 해야함.broadcast address : 모든 bit가 1인 주소, mac FF-FF-FF-FF-FF-FF IP 255.255.255.255
- Multicast 1:ulti다수메시지는 1개만생성 , dst주소에 multicast address 넣어서, 네트워크 장비가 원하는 node에게만 전달을 해줌. 네트워크 장비가 누가 원하는지 목록을 가지고 있어야 함. (IGMP)

OSI 7 layer Model

- Physical Layer : 케이블, 커넥터, 트랜시버 등 물리적인 것(손으로 만질수있음) network adpater (data <-> 전기적신호 변환)통신 단위 : bit 비트

장비 : 통신케이블 (TP, 동축, 광), 리피터, 허브

신호 -> data(1,0) -> 신호

A============================[리피터]====================B

TP (100M)                    TP (100M)

리피터에서 network adapter가  여러개가 있는 것이 더비허브. (프로토콜을 인식 할 수 없음)

- Data Link Layer : L2, 스위칭LAN : 토큰링, **이더넷**, FDDI ….WAN : SLIP, PPP, Frame-relay, ATM 등, (사설망)

프로토콜 : 이더넷ethernet  -  LLC (3계층을 연결), MAC (1계층을 연결)        이더넷 header : src / dst mac주소

장비 : (이더넷)스위치 (src/dst mac주소를 보고 스위칭해줌- mac address table)    통신 단위 : (PDU : protocol data unit) frame 프레임

- Network Layer : L3, 주소 방식, 이 주소를 가지고 길찾기(라우팅)route 길,경로routing 길찾기 (최적의 경로를 찾는 것)router 라우터 장비 : 라우터, L3 Switch (길찾기를 위해서 이정표=라우팅 테이블이 필요함.)프로토콜 : **IP** ( src/dst IP Address), IPX, Appletalk 등…     ICMP (비신뢰적인 IP를 위해 에러/정보)     IGMP (그룹 메세지, multicast group에 join, join을 해제)    라우팅 프로토콜 : 길찾기를 위해 라우터들끼리 network를 동기화 할 때    RIP, IGRP, EIGRP, BGP, IS-IS

—--------------------------    ARP (IP에 해당하는 mac 주소를 알아오는 프로토콜)    RARP (Mac 주소에 해당하는 IP주소를 알아오는 프로토콜)통신단위 (PDU) : packet패킷 (예전에는 datagram 데이터그램라고 부르기도 했음)공인망(ISP=인터넷망)에는 여러 라우터들이 있음. 여러 라우터들이 목적지 까지 데이터를 빠르게 전달하기 위해서 패킷 스위칭을 함. (옆의 라우터에게 전달. loop 목적지를 찾지못하고 네트워크를 떠돌수 있음-유령, 이를 방지하기 위해서 라우터를 지날 때마다 카운트를 함.)

- Transport Layer : L4 , 전송방식 (신속, 정확)프로토콜 : 신속 UDP, 정확 TCP (서비스마다 사용하는 전송방식이 정해져 있음) ( src /dst port number )프로그램 설치> disk에 저장, 설치된 프로그램을 실행 > 메모리에 프로그램이 올라감 > 프로세스 (동작중인 프로세스) , 포트 번호로 프로세스를 식별함.

통신 단위 (PDU)  : 세그먼트 Segment,  데이터그램 datagram장비 : L4 Switch , 로드밸런서 (L4)  - 로드밸런싱

web1-80 (http)

web2-443 (https)------로드밸런서 <—---------- (서비스 요청) 고객

web1 (http)------

web2 (http)------L4 SW <—---------- (서비스 요청) 고객

cmd> netstat -an    IP address:port    소켓, 세션 정보

(L3)

금융권서버—-----switch—-------L4SW—--gateway1—-------L4SW—-------internet

—-------L4SW—--gateway2—-------L4SW—-------

방화벽

VPN

- 예전에는 UDP / TCP 중에서 TCP 를 사용하는 경우가 많았습니다. (웹, 메일, 원격접속 등)
- 요즘은 UDP 트래픽도 많습니다. (인터넷 전화, 인터넷 TV, 냉장고…)QoS : 패킷을 분류하여 마킹을 함. 네트워크 장비가 이 마킹을 보고 처리를 함.실생화 예) 구급자, 소방차 - 사이렌

프로토콜 protocol

L7    |                        웹 HTTP, HTTPS  DNS 이름해석

L6    | 대부분의 서비스는 5~7묶어서 처리됨.   메일 SMTP(메일발송), POP3(메일수신), IMAP

L5    |    port number (통신목적-보안)          로그 syslog  , SNMP 원격접속 telnet, SSH, RDP

L4 Transport layer : 신속 UDP , 정확 TCP

L3 Network layer : IPv4,v6  IPX 등…

ICMP(에러/정보전달), IGMP (멀티캐스트)

라우팅 프로토콜 (RIP, EIGRP, OSPF, IS-IS, BGP

ARP (IP-MAC주소알아오기), RARP (MAC-IP주소알아오기),

L2 data link layer    LAN : ethernet , tokenring, tokenbus, FDDI 등

WAN : SLIP, PPP , Frame-relay, ATM 등

L1

router 라우팅(길찾기)하는 장비

switch 스위칭하는 장비

C:\Windows\System32\drivers\etc\services

서비스, UDP/TCP,  port number

장비

L7 웹 방화벽, 메일 방화벽, L7 switch

L6

L5

L4 : L4 switch (L1 ~ L4 , UDP, TCP의 port number정보를 보고 세션을 구분함-session table)

로드밸런싱을 위해서 사용함.

L3 : Router, L3 switch  (L1 ~ L3, IP의 IP주소를 보고 길찾기하여 전달함- ip routing table)

L2 : switch  (L1 ~ L2, 이더넷의 mac주소를 보고 데이터를 전달함-mac address table)

L1 : Hub ( data <-> 신호)

PDU(통신단위)  - 데이터 전송시 encapsulation

L7   |

L6  |         data + 서비스

L5  |        [[www.naver.com](http://www.naver.com/) 요청] + http

L4        [       요청 + http             ] + TCP header        > segment세그먼트

L3        [    요청+http+tcp               ] + IP header        > packet 패킷

L2     tailer [                요청+http+tcp+ip          ] + ethernet header    > frame 프레임

L1

Router—--switch1—-switch2—switch3—-- pc(s)

Router—--switch1—-switch2—switch3—-- pc(s)

p64  IPv4 주소 : 10.139.4.36

십진수로 표기

숫자가 4개. 그 사이에 점(.)으로 구분

숫자 하나가 0 ~ 255까지 가능하다

사람이 인식하기 쉽게 10진수로 표기하지만, 컴퓨터는 2진수로 계산

이진수 8bit  0000 0000 ~ 1111 1111

십진수                 0      ~  255

8bit                        -> 32bit (4byte) 주소길이

0 ~255  .  0 ~255  .  0 ~255  .   0 ~255

- > 32bit (4byte) 주소길이

표현할 수 있는 경우 수 : 2^32   > 약 43억개

IPv4 주소가 부족 함

기술 : 쪼개어 사용  - 서브넷팅  /  합치기

DHCP  , 사용하는 켜지는 PC만 IP주소를 자동으로 할당.

사설IP주소 대역 (인터넷이 하려면 공인 IP주소로 바꾸어야 함: NAT)

해결책 : IP version 6  (128bit)

사설 IP주소로 이루어진 네트워크 : 사설망

공인 IP주소로 이루어진 네트워크 : 공인망 = 인터넷망

학교

외부KT 전화번호 123-4567

—-학교 내에 사내 번호

이진수        십진수

0000 0000    00000 0001    1

0000 0010    2

0000 0011    3

0000 0100    4

0000 0101

…..

1111 1111      255

2^7 + 2^6 + 2^5 + 2^4 + 2^3 + 2^2 + 2^1 + 2^0

= 128 + 64 + 32 + 16 + 8 + 4 + 2 + 1

—-----------

192

—-------------------

224

—------------------------

240

—----------------------------

248  +4

—--------------------------------

252 +2

—-----------------------------------

254 +1

—-------------------------------------- 255

bool연산

and : 2개 숫자가 모두 1일 때, 결과가 1

0  0   > 0

1  0  >  0

0  1  > 0

1  1  > 1

ip address 192.168.1.10

subnetmask 255.255.255.0  (IP주소의 Network ID 부분 알 수있음. 크기)

and —----------------------------

network address

서울시 서초구 서초동 1번지

서울시 서초구 서초동 2번지

서울시 서초구 서초동 3번지

서울시 서초구 서초동 4번지

…….

서울시 서초구 서초동 ..번지

________________ —------

같은 동네 (동일)           서로 다른 부분

192.168.1.0

192.168.1.1

192.168.1.2

192.168.1.3

…

192.168.1.255

________—---

A           B

A 같은 네트워크 내에 동일한 부분 ; Network ID

B 같은 네트워크 내에서 서로 다른 부분 : Host ID

Network ID를 연속된 1로 표기 (Host ID 를 0으로 표기)

1111 1111 . 1111 1111 . 1111 1111 . 0000 0000

255  .      255   .     255   .    0             > subnetmask

IP  192.168.1.10

sm 255.255.255.0

and연산을 network address (동네대표주소)

IP  11000000 . 10101000 . 00000001 . 00001010

sm 1111 1111 . 1111 1111 . 1111 1111 . 0000 0000

and—----------------------------------------------------------

11000000 . 10101000 . 00000001 . 0000 0000  > 십진수 192.168.1.0

network adapter

= interface

= LAN card 랜카드  (그래픽카드, 사운드카드)

= 스위치 포트

어떤 시스템의 interface에 따라서  보내고, 받는 신호 순서가 다름. (8가닥 1~8)

PC, 서버, 라우터 : 순서- 송신/수신  (Tx Rx)

스위치, 허브 : 순서 - 수신/송신 (Rx, Tx)

수신            송신

스위치  —--------------------------- 라우터

송신            수신

수신            수신

스위치  —--------------------------- 스위치

송신            송신

network 192.168.1.0

subnet mask 255.255.255.0

IP주소 대역 192.168.1.0 ~ 192.168.1.255

192.168.1.0  Network Address 대표 역할로 정해져 있음.

192.168.1.1     게이트웨이에게 할당.

192.168.1.2

…

192.168.1.10  pc할당

….

192.168.1.254

192.168.1.255  Broadcast Address 방송용 역할로 정해져 있음.

오늘의 정리.

1. OSI 7 Layer Model에 대해서 정리해봅시다.

누가 만들었을까요?  왜 만들었을까요?

각 Layer name, 기능, 프로토콜, 장비, PDU(데이터 단위)

1. TP 케이블이 2가지가 있습니다. 무엇일까요? 왜 2가지로 나누어 질까요? 각 pc, 서버, 라우터, 스위치, 허브의 network adapter의 송수신 순서는 어떻게 될까요?

리피터 repeater

허브 : 데이터(프레임)을 받으면 들어온 포트를 제외하고 나머지 모든 포트로 전달함.

Flooding 플루딩

2개 이상의 포트에서 동시에 신호가 들어오게 되면 충돌이 남. collision

CSMA/CD

p96 콜리전 도메인 (Collision Domain) 충돌 도메인

p101   브릿지 bridge   스위치 switch  - 콜리전 도메인을 나누어줌

p102

p119  looping 루핑

Router—--------switch—---------server

미리 케이블을 이중화 하여 연결함.

Router—--------SW1============SW2—----server

L2 에서 looping루핑을 방지하기 위해서 STP 스패닝트리 프로토콜을 동작함.

시스코의 이더채널  : 물리적인 여러 인터페이스 가상으로 하나로 묶어서 하나인것처럼 동작함.

broadcast domain 브로드캐스트도메인  (방송영역)

broadcast 트래픽이 전달된는 영역 - 하나의 네트워크가 하나의 broadcast domain임.

스위치 : broadcast 를 flooding함

라우터 : broadcast를 차단. broadcast domain을 나누어 줌.

라우터 : LAN네트워크와 LAN네트워크를 나누어주고 연결해주는 장비

L3 장비. IP 프로토콜을 인식 수 있음.

IP header 안에 dst ip address 주소를 이정표(IP routing table)에서 찾아서 다음 라우터에 전달해줌.

switch : Mac address table 스스로 만들어서 목적지 주소를 참고하여 전달함.

목적지 mac 주소를 모를 경우, flooding 모두에 전달함.

router : ip routing table를 엔지니어가 만들어주거나 프로세스를 실행하여 유지하도록함.

패킷의 목적지 주소를 라우팅 테이블과 비교하여 전달할 인터페이스를 결정함.

목적지 IP주소를 모를 경우, 해당 패킷을 버림.(drop)

src 192.168.1.10

dst 192.168.1.13

sm 255.255.255.0

—----------------------  목적지가 같은 네트워크에 있음 > 내가 직접 전달해야함 > 1.13의 mac주소를 arp로 알아와서 스위칭함.

src 192.168.1.10    src n 192.168.1.0

dst 1.1.1.1        dst n 1.1.1.0

sm 255.255.255.0

—--------------------- 목적지가 다른 네트워크에 있음. > 내가 스위칭할 수 없음 > 게이트웨이에게 전달해야함. 게이트웨이의 mac주소를 알아와서 전달함.

해당 네트워크에 맞는 IP주소를 할당 (subnet mask)

같은 네트워크 내에서 IP 통신이 되는지 확인

192.168.2.0  : 192.168.2.1 , 192.168.2.10

게이트웨이로 ping test

외부로 연결되었을 경우, 외부망으로 ping test

DNS test

라우팅 테이블 : 192.168.1.0/24

192.168.2.0/24

/24 prefix   ,   (network ID가 24bit 입니다.)  = subnetmask 255.255.255.0

Network Address 의 Network ID와 Host ID를 식별하고자 함. (목적)

subnetmask : IP주소를 할당할 때 입력   (Newtwork ID 1로 표기)

255.255.255.0   255.255.0.0    255.0.0.0

wildcardmask : 방화벽, ACL접근제어목록 정책 입력시 사용.  (Nework ID 0으로 표기)

0.0.0.255    0.0.255.255        0.255.255.255

prefix : 디자인, IPv6표기 할 때 사용.

bit수를 /n 로 표기. 줄여서 표기할 때 사용.

192.168.1.0/24   192.168.1.0 ~ 192.168.1.255 IP주소 대역

part 5

ipv4 : 10진수로 표기

길이 : 4byte = 32bit

IP 2^32 = 43억개

8bit . 8bit . 8bit . 8bit

0~255 . 0 ~ 255. 0 ~ 255 . 0 ~ 255

_____

첫번째 옥텝의 숫자에 따라서

IPv4 주소 체계  = class

32bit

A  class     0xxx xxxx. ~

0 ~ 127 . x.x.x   (또는 1~126.x.x.x )

default sm     255.0.0.0

B class        10xx xxxx. ~

128 ~ 191.x.x.x

default sm      255.255.0.0

C class    110x xxxx. ~

192 ~ 223.x.x.x

default sm    255.255.255.0

D class    1110 xxxx. ~

224 ~ 239 .x.x.x

특수목적용 (멀티캐스트용)

E class        1111 xxxx. ~

240 ~ 255.x.x.x

연구용

1. 200.200.200.200

c class default subnetmask  255.255.255.0   11111111.11111111.11111111.0000000

Network ID :  200.200.200.

Host ID :                .200

Network Address (대표역할) 200.200.200.0

IP주소 대역 200.200.200.0 ~ 200.200.200.255

1. 1.2.3.4

a class . default subnetmask 255.0.0.0      11111111.00000000.0000000.0000000

Network ID 1.

HosT ID        .2.3.4

Network Address 1.0.0.0

IP주소 대역 1.0.0.0 ~ 1.255.255.255

1. 193.10.20.30

255.255.255.0  default subnetmask

Network ID 193.10.20.

Host ID                      .30

Network Address 193.10.20.0   ( ip대역 193.10.20.0 ~ 193.10.20.255)

1. 180.11.22.33

B class default subnemtask 255.255.0.0

Network ID   180.11.

Host ID           .22.33

Network Address 180.11.0.0   (ip대역 180.11.0.0 ~ 180.11.255.255)

IP주소 디자인

classful   /8 , /16,  /24  default subnemtask를 이용할 경우.

classles

s  : default subnetmask을 나누거나 합쳐서 사용하여 class 사용하지 않는 경우

D class, E class는 subnetmask 가 없습니다. (예약된 주소임.)

IPv4에서 예약된 주소를 알아봅시다.

D class 특수목적용 (multicast용)        224~239.x.x.x

E class IP연구용            240~255.x.x.x  (또는 240~254.x.x.x)

0.0.0.0/8

"This network"

[[RFC791](https://www.iana.org/go/rfc791)]

0.0.0.0/32

"This host on this network"

모든 주소를 지칭하기도함.

라우팅 테이블에서는 default route를 의미함.

(현재 자신이 알고있는 주소외에 나머지 0.0.0.0/0) -> L3 장비인경우, 인터넷을 연결할 때, 반드시 있어야만 인터넷이 가능함.

127.0.0.0/8

Loopback

[[RFC1122](https://www.iana.org/go/rfc1122)]

localhost  서비스를 동작하고 해당 서비스를 확인할때       http://127.0.0.1 또는 http://localhost

169.254.0.0/16

Link Local

[[RFC3927](https://www.iana.org/go/rfc3927)]

DHCP 자동으로 IP할당받도록 설정하였으나, DHCP 서버로 IP주소를 못 받아올때 OS운영체제가 임의의 주소를 할당해줌.

240.0.0.0/4

Reserved

[[RFC1112](https://www.iana.org/go/rfc1112)]

255.255.255.255/32

Limited Broadcast

[[RFC8190](https://www.iana.org/go/rfc8190)] [[RFC919](https://www.iana.org/go/rfc919)]

D class

E class

HostID가 모두 0인 주소   ex) 192.168.1.0 network에서 192.168.1.0 (first ip)대표역할 network address

HostID가 모두 1인 주소  ex) 192.168.1.255 broadcast address

-> 미리 약속이 되어서(예약되어) 장비나 PC에 할당 할 수 없는 주소.

- 할당하도록 미리 정해진 주소 (사설IP주소대역)

10.0.0.0/8

Private-Use

[[RFC1918](https://www.iana.org/go/rfc1918)]

172.16.0.0/12

Private-Use

[[RFC1918](https://www.iana.org/go/rfc1918)]

192.168.0.0/16

Private-Use

[[RFC1918](https://www.iana.org/go/rfc1918)]

오늘의 정리

1. 허브, 스위치, 라우터를 비교해보세요.동작 Layer (L1부터 몇 Layer까지 동작하는지)
2. 장비에 어떤 프로토콜은 인식하는지.
3. 프로토콜의 어떤 주소를 인식하고 어떤 데이터베이스를 저장하는지
4. 이 데이터베이스를 어떻게 생성하는지
5. 목적지 주소를 모를 경우, 어떻게 동작하는지
6. IP version 4 주소 길이, 표기 방법(진수, 구분자), 구성 (ID)을 정리해봅시다.
7. IP version 4 주소 대역에서 예약된 주소들을 정리해봅시다.

교재 p165 까지 입니다. 정리가 끝나시면 읽어보세요.

내일은 서브넷팅을 진행하겠습니다.

리피터 : L1  , 데이터와 전기신호 변환

허브 : L1  , 데이터와 전기신호 변환 , 변환된 data를 인식할 수 없음. flooding

2개 이상 시스템이 동시에 보내면 충돌이남. CSMA/CD

Collision Domain 내에 있음.

브릿지 : L2  , 데이터와 전기신호 변환, 이더넷 프로토콜 인식 가능

Collision Domain 을 나누어 줌.  Broadcast Domain 내에 있음

스위치 : L2  , 데이터와 전기신호 변환, 이더넷 프로토콜 인식 가능

Collision Domain 을 나누어 줌.  Broadcast Domain 내에 있음

src/dst MAC 주소로 스위칭함. MAC Address Table (learning,flooding,forwarding,filtering,aging)

라우터 : L3 , 데이터와 전기신호 변환, 이더넷/IP 프로토콜 인식 가능

IP Routing Table(관리자가 설정 필요)

Broadcast Domain을 나누어줌.

IP Address (logical address)

version 4 : 주소 길이 4byte (32bit),  10진수 표기  (0~255.0~255.0~255.0~255)

첫번째 옥텟이 어떤 숫자인지에 따라서 class(주소체계)가 달라짐.

IP address (32bit) :  Network ID + Host ID

Network ID : 같은 네트워크 내에서 **동일**한 부분

Host ID : 같은 네트워크 내에서 **유일**한 부분

00000000 . 0000000 . 00000000 . 00000000

0NNNNNNN . HHHHHHHH . HHHHHHH . HHHHHHH

0~127 . x . x . x

A class default subnet mask  255.0.0.0    (prefix /8 )

Network ID 8 bit  (network 개수는 128개)

Host ID : 24bit

10NNNNNN . NNNNNNNN . HHHHHHHH . HHHHHHHH

128~191 . x . x . x

B class default subnet mask  255.255.0.0    (prefix /16 )

Network ID : 16bit

Host ID : 16bit (65,536개)

110NNNNN . NNNNNNNN . NNNNNNNN . HHHHHHHH

192~223 . x . x . x

C class default subnet mask  255.255.255.0    (prefix /24 )

Network ID : 24bit

Host ID : 8bit  (256개)

1110xxxxx . xxxxxxxx .xxxxxxxx . xxxxxxxx

224~239 . x . x . x

D class 특수목적용 - multicast용 주소

1111xxxx . xxxxxxxx . xxxxxxxx . xxxxxxxx

240~255 . x . x . x

E class  연구용

예약된 IPv4 주소 목록

- 0.0.0.0/8 This is network , 0.0.0.0/32 This host on this network
  - 라우팅테이블에서는 0.0.0.0 0.0.0.0 (또는 0.0.0.0/0) default route
- 127.0.0.0/8 Loopback 자가테스트용 (Localhost)
  - ping 127.0.0.1
- 169.254.0.0/16 Link Local (DHCP서버로부터 IP를 받아오지 못하면 OS가 임의로 할당함) - 임시로 내부통신을 위해 사용함.
- 255.255.255.255/32 Limited broadcast
- D class
- E class
- Host ID가 모두 0인 주소 (IP주소 대역에서 first) = Network Address
- Host ID가 모두 1인 주소 (IP주소 대역에서 last) = Broadcast Address

—---------------------------예약되어 있어서 장비나 시스템에 할당할 수 없는 주소

사설 IP주소 대역

- A class 10.x.x.x

**10.0.0.0/8**  IP주소대역 10.0.0.0 ~ 10.255.255.255 (N 1개)

- B class 172.16~31.x.x

**172.16.0.0/12**  IP주소대역 172.16.0.0 ~ 172.31.255.255 (N 16개)

- C class 192.168.x.x

**192.168.0.0/16**  IP주소대역 192.168.0.0 ~ 192.168.255.255 (N 256개)

192.168.0.0/16

192.168.0.0/24  192.168.0.0 ~ 192.168.0.255

192.168.1.0/24  192.168.1.0 ~ 192.168.1.255

192.168.2.0/24  192.168.2.0 ~ 192.168.2.255

192.168.3.0/24  192.168.3.0 ~ 192.168.3.255

…..

192.168.255.0/24  192.168.255.0 ~ 192.168.255.255

172.16.0.0/12

172.16.0.0/16   172.16.0.0 ~ 172.16.255.255

172.17.0.0/16   172.17.0.0 ~ 172.17.255.255

172.18.0.0/16      172.18.0.0 ~ 172.18.255.255

172.19.0.0/16   172.19.0.0 ~ 172.19.255.255

….

172.30.0.0/16   172.30.0.0 ~ 172.30.255.255

172.31.0.0/16   172.31.0.0 ~ 172.31.255.255

1~32 : 32개

0~31 : 32개

0~15 : 16개

16~31 : 16개

두번째 옥텟만 이진수로 전환하여 동일한 bit가 어디까지인지 확인해 봅시다.

172.16        ->    .00010000.

172.17        ->    .00010001.

172.18        ->    .00010010.

…

172.25        ->    .00011001.

..

172.30        ->    .00011110.

172.31        ->     .00011111.

_________

8bit.4bit

사설IP주소로 만든 네트워크 : 사설망  <-> 공인망(인터넷망)

사설IP주소는 인터넷이 안됨.

사설망에서는 인터넷을 위해서 공인IP주소로 변환을 해야 함

Network Address translation (NAT 기술)

패킷트레이서에서 Router가 패킷처리하는 것을 확인

IP header  : src/dst,  version, TTL , check

fa0/0 → Router →  fa0/1

decapsulation  mac주소확인 / routing table비교-int 선정 / encapsulation

Layer 2 에서 루핑 looping -> 스위치들이 STP를 동작하여 예방

switch1—-------------------switch2

스위치와 스위치 사이에 다중연결(가용성을 높이기 위해 연결함)을 할 경우,

mac address 중복, broadcast storm, 루핑 등 문제점이 발생함.

이를 예방하기 위해서 spanning-tree protocol (STP) 동작해서

토폴로지를 구성 (tree구성)- 주경로 선정, 나머지 포트를 임시로 막아 둠.

주경로가 문제가 생기면 임시포트를 열어둠.

Layer 3에서 루핑 looping ->  IP header에 TTL 필드로 라우터가 카운트함.

라우팅

패킷  ->      [라우터]    ->

inbound            outbound

라우팅 테이블과 비교해서 어느인터페이스로 전달할지 결정

패킷 스위칭 방식 이용 - 루핑 발생

예방차원에서 라우터를 거치는 수를 제한을 함.

라우터를 거칠때 마다 카운트 함.

IP header 의 TTL 필드 (0~255)

라우터를 거칠때 1씩 감소.

라우터가 “0”이 되면 해당 패킷을 drop.

라우터가 출발지에게 ICMP 에러메시지를 전송함.

192.168.1.10에서 192.168.2.10으로 ping을 하게되면 라우터 fa0/0 인터페이스로 들어가서(인바운드) 라우팅 테이블 비교하여  fa0/1 인터페이스로 전달됨(아웃바운드)

class  : 제일 작은 네트워크  C class

sm 255.255.255.0

Host ID : 8bit  2^8=256   (IP 256개)  (Network address, Broadcast address포함)

네트워크를 나누는 것 : 서브넷팅

ex)  A class 하나  -> 라우팅 테이블에 Network 목록 1개.

A class  서브넷팅 256개 -> 라우팅테이블 목록 256개

라우터 끼리 네트워크 목록을 동기화 (dynamic routing protocol)

여러 네트워크를 하나로 합치려고 함 -> summary 썸머리 (summaraztion)

네트워크를 나눌 대, 나누어진 작은 네트워크를 서브넷이라고 함.

서브넷팅을 하는 경우

1. 필요한 IP가 있을 때 : HostID를 맞추기 (단, 2^n 으로만 가능)
2. 필요한 서브넷 개수가 있을 때

IP address 32bit  = 동일한 Network ID + 유니크 Host ID

(IP개수 = 해당 네트워크 크기)

Host ID 에 따라서 IP개수 계산해보기

192.168.1.0/24

host ID 8bit : 2^8 = 256개  (NA,BA 제외하면 254개)

host ID 7bit : 2^7 = 128개  (NA,BA 제외하면 126개)

host ID 6bit : 2^6 =   64개  (NA,BA 제외하면   62개)

host ID 5bit : 2^5 =   32개  (NA,BA 제외하면   30개)

host ID 4bit : 2^4 =   16개  (NA,BA 제외하면   14개)

host ID 3bit : 2^3 =     8개  (NA,BA 제외하면     6개)

host ID 2bit : 2^2 =     4개  (NA,BA 제외하면     2개) -물리interface에서 할당

host ID 1bit : 2^1 =      2개  (NA,BA 제외하면    0개)-가상interface할당가능

예제1)  **210.1.2.0/24**

Network address   210.1.2.0

subnet mask        255.255.255.0

ip대역     210.1.2.0 ~ 210.1.2.255  ( 256개)

1. subnet 2개로 나누기

첫번째N   : 128개   210.1.2.0 ~ 210.1.2.127   N.a  210.1.2.0/25

두번째N   : 128개   210.1.2.128 ~ 210.1.2.255  N.a 210.1.2.128 /25

0000 0000    0

0111 1111    127

1000 0000   128

1111 1111     255

IP할당할 때에는 IP주소, subnet mask 입력해야함

/25 prefix을 subnet mask 바꿀 수 있어야 함.

이진수 11111111.11111111.11111111.10000000

십진수 255.255.255.128

1. subnet 4개로 나누기

128개   210.1.2.0 ~ 210.1.2.127   **N.a  210.1.2.0/25**

- 64개 210.1.2.0 ~ 210.1.2.63 N.a 210.1.2.0/26
- 64개 210.1.2.64 ~ 210.1.2.127 N.a 210.1.2.64/26

128개   210.1.2.128 ~ 210.1.2.255  **N.a 210.1.2.128 /25**

- 64개 210.1.2.128 ~ 210.1.2.191 N.a 210.1.2.128/26
- 64개 210.1.2.192 ~ 210.1.2.255 N.a 210.1.2.192/26

__

0000 0000      0

0011 1111     63

0100 0000    64

0111 1111    127

quiz1 >   206.34.71.0/24

ip가 30개가 필요합니다. 크기에 맞게 서브넷팅 하세요.

30개의 IP주소를 위해 Host ID를 얼마나 해야할까요??

ip가 30개 -> 32개    Host ID 몇 bit?? 5bit로 하면 됨.

32bit  =   Network ID  + Host ID

??         5bit

/27

ip주소대역  |  Network addr  |  Broadcast addr  |    할당가능한IP주소대역

206.34.71.0 ~ 31  |  N 206.34.71.0/27  |  B 206.34.71.31  |  206.34.71.1 ~ 30 (30개)

206.34.71.32 ~ 63  |  N 206.34.71.32/27  | B 206.34.71.63  |  206.34.71.33 ~ 62

206.34.71.64 ~ 95  |  N 206.34.71.64/27  |  B 206.34.71.95  | 206.34.71.65 ~ 94

206.34.71.96 ~ 127  |  N 206.34.71.96/27  | B 206.34.71.127  | 206.34.71.97 ~ 126

206.34.71.128 ~ 159  |  N 206.34.71.128/27  |  B 206.34.71.159  |  206.34.71.129 ~ 158

206.34.71.160 ~ 191  |  N 206.34.71.160/27  |  B 206.34.71.191  |  206.34.71.161 ~ 190

206.34.71.192 ~ 223  |  N 206.34.71.192/27  |  B 206.34.71.223  |  206.34.71.193 ~ 222

206.34.71.224 ~ 255  |  N 206.34.71.224/27  |  B 206.34.71.255  |  206.34.71.225 ~  254

subnet 8개

/24 -> /27     network ID가 3bit이 추가된  2^3=8

Network  address 가 0부터 32의 배수입니다. 즉, Host ID의 배수

206.34.71.160/27

Network ID 27bit

Host ID 5bit   (IP개수=크기)  2^5=32

206.34.71.160 ~ 206.34.71.191

N.a 206.34.71.160/27

B.a 206.34.71.191

할당 할 수 있는 ip주소 : 206.34.71.161 ~ 190

quiz 2 >  193.1.2.0/24 major network를 IP가 50개가 되도록 서브넷팅 하시오.

ip 50개를 수용하기 위해서는 64개 씩 나누어야 함.

Host ID 는 6bit가 되어야함.

Network ID는 26bit

subnet의 network address는  0부터 해서 64의 배수가 됨.

Network addr(first)    Broadcast addr(last)        할당가능한 IP주소대역

193.1.2.0/26        193.1.2.63            193.1.2.1 ~ 193.1.2.62

193.1.2.64/26        193.1.2.127            193.1.2.65 ~ 193.1.2.126

193.1.2.128/26    193.1.2.191            193.1.2.129 ~ 193.1.2.190

193.1.2.192/26    193.1.2.255            193.1.2.193 ~ 193.1.2.254

/24  -> /26 했더니. network ID를 2bit  2^2=4    subnet이 4개

Gateway—--------switch—------------hosts

193.1.2.129/26            193.1.2.130 ~ 193.1.2.190/26

pc IP할당하기

IP address 193.1.2.130

subnet mask  255.255.255.192

gateway 193.1.2.129

dns 8.8.8.8

- prefix /26 network ID 26bit

11111111 . 11111111 . 11111111 . 11000000

255.255.255.192

quiz 3 >  211.6.8.0/24 major network를  서브넷팅 하고자 합니다. subnet을 8개로 나누어 보세요.

Network ID 27bit    24->27  3bit를 subnet bit로 사용   2^3 = 8

Host ID         5bit     2^5 = 32   ip를 32개씩 나누면 됨.

Network addr (first)    Broadcast addr (last)        할당가능한 IP주소대역

211.6.8.0 /27        211.6.8.31            211.6.8.1 ~30

211.6.8.32 /27        211.6.8.63            211.6.8.33 ~ 62

211.6.8.64 /27        211.6.8.95            211.6.8.65 ~ 95

211.6.8.96 /27        211.6.8.127            211.6.8.97 ~ 126

211.6.8.128 /27    211.6.8.159            211.6.8.129 ~ 158

211.6.8.160 /27    211.6.8.191            211.6.8.161 ~ 190

211.6.8.192 /27    211.6.8.223            211.6.8.193 ~ 222

211.6.8.224 /27    211.6.8.255            211.6.8.225 ~ 254

게이트웨이 ip  211.6.8.222 sm 255.255.255.224

- > Routing table 211.6.8.192/27

라우팅 테이블

10.0.0.0/8   via  라우터1    10.0.0.0 ~ 10.255.255.255

10.0.0.0/16  via  라우터2    10.0.0.0 ~ 10.0.255.255

10.0.0.0/24  via  라우터3    10.0.0.0 ~ 10.0.0.255

10.0.1.0/24  via  라우터4    10.0.1.0 ~ 10.0.1.255

10.0.0.128/26 via 라우터5    10.0.0.128 ~ 10.0.0.191

패킷 수신 1   : dst  10.100.100.100    라우터1으로 전송될것임.

패킷 수신 2   : dst  10.0.100.100    라우터2로 전송됨.

패킷 수신 3   : dst  10.0.0.100    라우터3로 전송됨.

패킷 수신 4   : dst  10.0.0.180    라우터5로 전송됨.

subnet mask longest match

오늘의 정리

1. 서브넷팅이란?
2. 서브넷팅을 어떻게 하는지 설명해보세요.
   1. 필요한 IP개수가 있을 경우
   2. 필요한 subnet개수가 있을 경우
3. 라우팅테이블의 네트워크 목록에서 목적지 주소를 찾는 방법 : subnet mask longest match

classful / classless

서브넷팅 또는 VLSM

썸머리 summry ,  supernetting

프로토콜 하는 역할

이더넷, IP, TCP, UDP, port number

서비스

IP address 32bit  = 동일한 Network ID + 유니크 Host ID

(IP개수 = 해당 네트워크 크기)

192.168.1.10

192.168.1.20

sm 255.255.255.0  -> Network ID가 24bit   “192.168.1.” 까지 모두 동일함.

Host ID 같은네트워크 내에서 서로 다름.

192.168.1.0 ~ 192.168.1.255

라우팅 테이블에는 대표 주소  first -> Network Address  192.168.1.0/24

교재는 p153 ~ p187

classful  /  classless

classful : default subnet mask를 사용함.    A/B/C class  (서브넷팅안함)

classless : A/B/C class개념없이 서브넷팅, vlsm한 경우를 뜻함.  (CIDR표기)

[CIDR (ktword.co.kr)](http://www.ktword.co.kr/test/view/view.php?nav=2&no=1144&sh=cidr)

TCP UDP header

[TCP/IP Reference | Nmap Network Scanning](https://nmap.org/book/tcpip-ref.html)

port number 16bit    2^16=0~65535(65536개)

RFC 6335

Port numbers are assigned in various ways, based on three ranges:

**System Ports (0-1023)**,     =잘알려진포트   , 서버들이 주로 사용하는 서비스 포트

**User Ports (1024-49151)**,   =업체가 등록해서 사용하는 포트 registry port

and the **Dynamic and/or Private Ports (49152-65535)**  클라이언트들이 사용함

DNS 트래픽

[ [www.daum.net](http://www.daum.net/) ip?? | DNS | UDP | IP |  ethernet ] ->

요청일때

ip.src  자신의 ip (client)

ip.dst   dns server (ipconfig /all)

udp.src   dynamic port (캡쳐 62207)

udp.dst   systemport (53)

[FQDN, Fully Qualified Domain Name,](http://www.ktword.co.kr/test/view/view.php?nav=2&no=2705&sh=fqdn)

서버이름.도메인 네임.   [www.daum.net](http://www.daum.net/)

pc>  ping [www.kitri.com](http://www.kitri.com/)

DNS 를 통해서 IP주소를 알아옴 (dns 요청, 응답)

ICMP  ping echo 요청, 응답

wireshark display filter  : dns or icmp

DNS서비스는 transport Layer 에서 UDP를 사용함. (때로는 TCP를 사용하기도 함.)

HTTP 서비스 확인해보기

서버 [www.kitri.com](http://www.kitri.com/)

클라이언트 PC22

프로그램 웹브라우저

HTTP 서비스는 TCP로 세션을 맺은 다음에 HTTP 서비스 요청/응답이 전송됨.

3 way handshake로 TCP로 세션을 맺음.

PC22>

IP Address......................: 211.92.81.138

Subnet Mask.....................: 255.255.255.128

DNS Servers.....................: 211.92.81.10

ping [www.kitri.com](http://www.kitri.com/)

[http://www.kitri.com](http://www.kitri.com/)

DNS서비스로 FQDN의 IP주소를 알아와야함.

알아온 IP주소로 해당 서비스를 해야함.

src 211.92.81.138      -> N.A.  211.92.81.128

dst 211.92.81.10  (DNS)    -> N.A.  211.92.81.0

sm  255.255.255.128

목적지(DNS서버)가 내부에 없음. pc가 전달할 수 없음.

게이트웨이에게 전달을 해주어야 함.

tcp통신과정

[https://lh4.googleusercontent.com/vAMlZMbjzjEjsKc-_LT4FuyYqrLUMwZA-xRvZOZCn8TE-x_nOm1jRNawmElgv8U3OmRr2WzolCWTPsjW3ZXoEySUb5P8erYN-KYT300SEZmHBo0afa2jVEZAt1pPXQJOyZ9K36pg](https://lh4.googleusercontent.com/vAMlZMbjzjEjsKc-_LT4FuyYqrLUMwZA-xRvZOZCn8TE-x_nOm1jRNawmElgv8U3OmRr2WzolCWTPsjW3ZXoEySUb5P8erYN-KYT300SEZmHBo0afa2jVEZAt1pPXQJOyZ9K36pg)

cmd> netstat -an

메일을 보낼 때, SMTP  TCP  서버의 port number  25

메일을 받을 때, POP3  TCP  서버의 port number 110

시뮬레이션 모드에서 확인

FTP  TCP 21, 20   (21로그인, 20파일전송)

passive mode  / active mode

sFTP

FTP over SSL

TFTP  UDP 69 port

DHCP 자동으로 IP를 할당할 때 사용하는 서비스,  67,68

리눅스 원격접속 SSH  TCP 22

telnet TCP 23

다양한하 서비스, 해당 전송 프로토콜과 port number

16:05

Network A—------------[ Router ]—---------------Network B

다른 network 를 연결하는 장비는 라우터 입니다.

스위치에게 네트워크를 가상으로 구분하도록 함.  vlan  가상랜

고객A   가상머신1,  가상머신2   : vlan 1

고객B   가상머신3, 가상머신4    : vlan 2

NAT  network address translation 주소변환기술

공인 -> 공인

공인 -> 사설

사설 -> 공인  (* 가장 많이 사용함)  인터넷을 하기 위해서

사설 -> 사설

교육센터

인터넷—-------------장비—---강의장—-------교육생 내에 또다른 사설망

공인IP        사설망                 가상머신

172.16.0.0/16        192.168.1.0/24

패킷트레이서 시뮬레이션 모드에서 IP주소가 변환되는 것을 확인해보세요.

내부 사설망PC에서 외부서버로 http나 ping을 보내고,  데이터가 구로라우터에 있을 때, 데이터를 클릭하여 Inbound/outbound 탭을 눌러서 비교해보시면 됩니다.

subnetting 네트워크 나누는 것

왜?  A, B class 너무 큼. 필요한 size만큼 나누기.

10.0.0.0/8

IP address  32bit

192.168.1.0

192.168.1.1

192.168.1.2

192.168.1.10

________

동일: Network ID

—--  유일 Host ID

어디까지가 network ID를 표기하기위해서 subnet mask (prefix)

연속된 1로 network ID를 표기   255.255.255.0

원 래   N  192.168.1.0  255.255.255.0    ( ip주소 대역 192.168.1.0 ~ 192.168.1.255) - 256개 ip

- 128개 0~127 ,    대표 192.168.1.0/25
- 128 개 128 ~ 255 192.168.1.128/25

network ID 25bit 동일

host ID

0        0000 0000            128          1000 0000

127    0111 1111            255    1111 1111

ip 32  =  /24      nid  24 + host id 8bit

/25       nid  25  + hostid  7bit      (ip개수 , 2^7=128개) 서브넷 크기

/24 -> /25     Host ID의 1bit 가 Network ID로 바뀌었음.  subnet bit 1bit

2^1 = 2  subnet 2개 생성

예)   192.168.1.0/24 서브넷팅 : 서브넷 ip 60개   -> 64개 = 2^n  host id를 몇 bit를 해야 ? 64개 ip가 나올까요?

ip60개를 수용하되, 이진수로 표기를 할 수 있어야함.

2, 4, 16, 32, 64, 128, 256

24bit       +     8bit

ip address 32bit  =   Network   Id   ??   +  Host ID  6bit

/26

/24 ->. ./26    : Host ID 2bit가 Nework ID로 전환됨.  subnet bit 2bit       서브넷 갯수가 달라짐.

00

01

10

11

2^2=4   subnet 4개

서브넷의 크기 host ID가 기준.  host ID 6bit   2^6=64  하나의 서브넷 64개의 ip를 가짐.

0~63

64~127

128~191

192~255

IP주소 대역의 시작 -> Network Address

IP주소 대역의 끝 -> broadcast address    대역에서 2개를 제외하고 나머지 대역을 IP주소로 할당할 수 있음.

vlan 교재 : p256~299

텔넷 교재 440~444

ICMP utility ping, tracert 교재 445~451

NAT 네트워크주소변환기술 교재 p131~135

서비스 개념 관련 참고 도서  : TCP/IP가 보이는 그림책 (성안당 출판) - 도서관에서 대여하세요. 한 번 보면 그만이기 때문에 대여하시면 됩니다. (OSI 7 Layer, 웹서비스, 메일서비스 등)

[TCP/IP 가 보이는 그림책 - YES24](http://www.yes24.com/Product/Goods/1401800)

많이 사용하는 서비스

DNS  : FQDN이름을 IP로 , IP를 FQDN으로 해석해주는 서비스

dns test cmd> nslookup [FQDN]

웹서비스 : HTTP(tcp 80) , HTTPS (tcp 443)- SSL-> TLS

원격접속서비스 : telnet (비암호화) , SSH, RDP

파일전송서비스 : FTP(비암호화), sFTP  ,  FTP over SSL

기밀성 무결성 가용성

telnet -> SSH

http -> HTTPS (SSL, TLS)

SMTP, POP3 비암호화 프로토콜 :  메일 서비스 over HTTPS

VPN 가상사설망

해시 값

NAT /PAT

NAT 사설IP주소와 공인IP주소가 변환되면서 1:1로 주소가 필요함.

사설망의 여러IP지소가 하나의 공인 IP주소로 변환될때, port 정보까지 포함하여 인지함. (PAT)

임소영 강사 [soyoung.lim2009@gmail.com](mailto:soyoung.lim2009@gmail.com)